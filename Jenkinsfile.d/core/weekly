pipeline {
  agent none

  options {
    disableConcurrentBuilds()
  }

  // Thursday at 9:30:00 AM Coordinated Universal Time - special case for one build;
  triggers {
    cron '30 9 * * 4'
  }

  stages {
    stage("Release"){
      steps {
        build job: "core/release/${ BRANCH_NAME }", parameters: [
          booleanParam(name: "VALIDATION_ENABLED", value: false),
          string(name: "RELEASE_PROFILE", value: "weekly")
        ]
      }
    }

    stage("Package"){
      steps {
        build job: "core/package/${ BRANCH_NAME }", parameters: [
          booleanParam(name: "VALIDATION_ENABLED", value: false),
          string(name: "RELEASE_PROFILE", value: "weekly"),
          string(name: "JENKINS_VERSION", value: "latest")
        ]
      }
    }
  }
}
